{"version":3,"file":"client.js","mappings":";;;;;;;;;;AAAa;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iCAAiC,mBAAO,CAAC,8DAAqB;AAC9D;AACA;AACA,CAAC;;;;;;;;;;;AC5BY;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY;AACZ,gCAAgC,mBAAO,CAAC,8DAAe;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AClHa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D;AACA;AACA;AACA,kBAAe;;;;;;;UCLf;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://exrp-test/./src/client/client.ts","webpack://exrp-test/./src/client/controllers/index.ts","webpack://exrp-test/./src/client/controllers/utils/delay.ts","webpack://exrp-test/webpack/bootstrap","webpack://exrp-test/webpack/before-startup","webpack://exrp-test/webpack/startup","webpack://exrp-test/webpack/after-startup"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Controllers = __importStar(require(\"./controllers/index\"));\n(async () => {\n    await Controllers.Init();\n})();\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Init = void 0;\nconst delay_1 = __importDefault(require(\"./utils/delay\"));\nlet isHeistAvailable = true;\nconst pedSpawnCoords1 = [589.793396, -3282.593506, 5.060791, 0.0];\nconst secondPedSpawnCoords = [657.138489, -778.430786, 23.545044, 172.913391];\nconst boat1SpawnVec4 = [583.503296, -3251.366943, -0.005127, 0];\nconst boat2SpawnVec4 = [583.200012, -3232.536377, -0.493774, 0];\nconst playersResetCoords = [588.593384, -3263.472412, 6.161865];\nconst pedModel = 'g_m_m_chicold_01';\nconst Init = async () => {\n    let playerData = null;\n    emit('esx:getSharedObject', async (obj) => {\n        playerData = obj.GetPlayerData();\n        const i = obj.GetWeaponList();\n        console.log(i);\n    });\n    const ped1status = await spawnInteractivePed(pedModel, pedSpawnCoords1);\n    const ped2status = await spawnInteractivePed(pedModel, secondPedSpawnCoords);\n    setTick(async () => {\n        await (0, delay_1.default)(100);\n        if (isHeistAvailable && !isPlayerPolice(playerData)) {\n            // heist is available\n            if (ped1status?.pedCreated && ped2status?.pedCreated) {\n                // ped is created\n                if (monitorPlayerPositionRelativeToPed(ped1status.pedHash)) {\n                    // player is near ped\n                    const boats = await configureHeist();\n                    const setTimeoutref = createTimerTickForHeist(boats, [PlayerPedId()]);\n                }\n            }\n        }\n    });\n};\nexports.Init = Init;\nfunction isPlayerPolice(playerData) {\n    return playerData?.job?.name === 'police';\n}\nfunction createTimerTickForHeist(vehicles, players) {\n    return setTimeout(() => {\n        deleteEntity(vehicles);\n        setPlayersResetCoords(players);\n        // notify with esx\n        emit('esx:showNotification', 'Heist Has Been Reset');\n    }, 1000 * 60 * 10);\n}\nfunction deleteEntity(entity) {\n    entity.forEach((entity) => {\n        SetEntityAsMissionEntity(entity, false, false);\n        DeleteEntity(entity);\n    });\n}\nfunction setPlayersResetCoords(activePlayers) {\n    activePlayers.forEach((player) => {\n        SetEntityCoords(player, playersResetCoords[0], playersResetCoords[1], playersResetCoords[2], true, true, true, false);\n    });\n}\nfunction handleHeistCooldown() {\n    isHeistAvailable = false;\n    setTimeout(() => {\n        isHeistAvailable = true;\n    }, 1000 * 60 * 1);\n}\nasync function spawnBoat(coords) {\n    const boatHash = 0xef813606;\n    RequestModel(boatHash);\n    while (!HasModelLoaded(boatHash)) {\n        await (0, delay_1.default)(1);\n    }\n    const boat = CreateVehicle(boatHash, coords[0], coords[1], coords[2], coords[3], true, false);\n    return boat;\n}\nfunction monitorPlayerPositionRelativeToPed(pedCoords) {\n    const playerCoords = GetEntityCoords(PlayerPedId(), true);\n    const dist = GetDistanceBetweenCoords(playerCoords[0], playerCoords[1], playerCoords[2], pedCoords[0], pedCoords[1], pedCoords[2], true);\n    return dist <= 2;\n}\nasync function spawnInteractivePed(pedmodel, pedSpawnCoords) {\n    const pedHash = GetHashKey(pedmodel);\n    RequestModel(pedHash);\n    while (!HasModelLoaded(pedHash)) {\n        await (0, delay_1.default)(1);\n    }\n    const playerPed = CreatePed(1, pedHash, pedSpawnCoords[0], pedSpawnCoords[1], pedSpawnCoords[2], pedSpawnCoords[3], true, false);\n    SetEntityInvincible(playerPed, true);\n    SetBlockingOfNonTemporaryEvents(playerPed, true);\n    FreezeEntityPosition(playerPed, true);\n    SetModelAsNoLongerNeeded(pedHash);\n    return {\n        pedCreated: playerPed != 0,\n        pedHash: pedHash != 0 ? pedHash : null,\n    };\n}\nasync function configureHeist() {\n    handleHeistCooldown();\n    emit('esx:getSharedObject', (obj) => {\n        const esx = obj;\n    });\n    const isPlayerInVehicle = IsPedInAnyVehicle(PlayerPedId(), false);\n    if (isPlayerInVehicle)\n        return;\n    const isPlayerInBoat = IsPedInAnyBoat(PlayerPedId());\n    if (isPlayerInBoat)\n        return;\n    const [boat1, boat2] = await Promise.all([spawnBoat(boat1SpawnVec4), spawnBoat(boat2SpawnVec4)]);\n    const randomBoat = Math.random() > 0.5 ? boat1 : boat2;\n    SetPedIntoVehicle(PlayerPedId(), randomBoat, -1);\n    SetEntityAsMissionEntity(boat1, true, true);\n    SetEntityAsMissionEntity(boat2, true, true);\n    return [boat1, boat2];\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction default_1(delay) {\n    return new Promise((resolve) => setTimeout(resolve, delay));\n}\nexports.default = default_1;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/client/client.ts\");\n",""],"names":[],"sourceRoot":""}